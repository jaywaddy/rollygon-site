---
import Icon from "@/ui//Icon.astro";

interface Props {
    size: string;
    shape: "rect" | "round";
    aspect: "1/1" | "16/9";
    placeholder?: boolean;
}

const {
    size = "sm",
    shape = "rect",
    aspect = "16/9",
    placeholder = false
} = Astro.props;

function getShape(input: typeof shape): "0" | "50%" {
    if (input === "rect") return "0";

    return "50%"
}

function calcSize(input: typeof size): string {
    const sm = "148";
    const lg = "424";

    if (input === "sm") return sm + "px";
    if (input === "lg") return lg + "px";
    if (input === "auto") return "100%";

    return input + "px";
}
---

<div
class="flex justify-center items-center aspect-[var(--img-aspect)] rounded-[var(--shape)] w-[var(--img-w)] min-w-[var(--img-w)] max-h-[var(--img-w)] border bg-surface"
style={{
    "--img-w": calcSize(size),
    "--img-aspect": aspect,
    "--shape": getShape(shape)
}}>
    <div class="box-content flex justify-center items-center aspect-[var(--img-aspect)] rounded-[var(--shape)] border-8 border-[var(--color-surface-primary)] w-full bg-gray-200">
        {placeholder && <Icon name="image" size="64" /> }
    </div>
</div>
