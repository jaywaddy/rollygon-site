---
import { ALL_CONTENT } from "@/content/config";
import { slugify } from "@/scripts/utilities.ts";
import Tag from "@/ui/Tag.astro";

interface Props {
	tags: Array<string> | undefined;
}

const { tags } = Astro.props;

function calcTagCount(input: string): number {
	return ALL_CONTENT.map((post) => post.data.tags)
		.flat(2)
		.filter((match) => input === match).length;
}
---

{
	tags && (
		<ul class="flex flex-wrap gap-1">
			{tags.map((tag) => (
				<li>
					<a href={"/tags/" + slugify(tag)}>
						<Tag label={tag} count={calcTagCount(tag)} />
					</a>
				</li>
			))}
		</ul>
	)
}
